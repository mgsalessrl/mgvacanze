var mcOptions,markers_cluster,clusterStyles,infoBox,infobox_width,bounds_list,marker_zindex,wpestate_initialize_poi,page_tracker=0,pin_images=mapfunctions_vars.pin_images,images=jQuery.parseJSON(pin_images),ipad_time=0,infobox_id=0,shape={coord:[1,1,1,38,38,59,59,1],type:"poly"},poi_marker_array=[],poi_type="",placeCircle="",circleLayer="",initial_geolocation_circle_flag=0,curent_gview_lat=jQuery("#gmap_wrapper").attr("data-cur_lat"),curent_gview_long=jQuery("#gmap_wrapper").attr("data-cur_long");jQuery(document).ready(function(){"use strict";wpestate_map_set_zoom_plus(),wpestate_map_set_zoom_minus(),wpestate_map_gmap_street(),wpestate_map_geolocation_button(),wpestate_navigate_pins()});function wpestate_show_pins_filters_from_file(){"use strict";if(jQuery("#a_filter_action").length==0)var e,i,t=jQuery("#second_filter_action").attr("data-value"),n=jQuery("#second_filter_categ").attr("data-value"),s=jQuery("#second_filter_cities").attr("data-value"),o=jQuery("#second_filter_areas").attr("data-value"),a=jQuery("#second_filter_county").attr("data-value");else t=jQuery("#a_filter_action").attr("data-value"),n=jQuery("#a_filter_categ").attr("data-value"),s=jQuery("#a_filter_cities").attr("data-value"),o=jQuery("#a_filter_areas").attr("data-value"),a=jQuery("#a_filter_county").attr("data-value");if(typeof t!="undefined"&&(t=t.toLowerCase().trim().replace(" ","-")),typeof t!="undefined"&&(n=n.toLowerCase().trim().replace(" ","-")),typeof t!="undefined"&&(s=s.toLowerCase().trim().replace(" ","-")),typeof t!="undefined"&&(o=o.toLowerCase().trim().replace(" ","-")),typeof infoBox!="undefined"&&infoBox!==null&&infoBox.close(),i=new google.maps.LatLngBounds,isNaN(markers_cluster)||markers_cluster.setIgnoreHidden(!0),typeof gmarkers!="undefined"){for(e=0;e<gmarkers.length;e++)!wpestate_classic_form_tax_visible(gmarkers[e].action,t)&&t!="all"&&t!="all"&&t!="all-sizes"?gmarkers[e].setVisible(!1):!wpestate_classic_form_tax_visible(gmarkers[e].category,n)&&n!="all"&&n!="all-types"?gmarkers[e].setVisible(!1):!wpestate_classic_form_tax_visible(gmarkers[e].area,o)&&o!="all"&&o!="all-areas"?gmarkers[e].setVisible(!1):!wpestate_classic_form_tax_visible(gmarkers[e].city,s)&&s!="all"&&s!="all-cities"?gmarkers[e].setVisible(!1):(gmarkers[e].setVisible(!0),i.extend(gmarkers[e].getPosition()));isNaN(markers_cluster)||markers_cluster.repaint()}i.isEmpty()||wpestate_fit_bounds(i)}function wpestate_fit_bounds_nolsit_leaflet(){map.setZoom(3),is_fit_bounds_zoom=0}function wpestate_fit_bounds_nolsit(){map.setZoom(3),is_fit_bounds_zoom=0}function wpestate_fit_bounds(e){if(is_fit_bounds_zoom=1,placeCircle!="")map.fitBounds(placeCircle.getBounds());else if(gmarkers.length===1){var t=gmarkers[0].getPosition();map.setCenter(t),map.setZoom(10),google.maps.event.addListenerOnce(map,"idle",function(){is_fit_bounds_zoom=0})}else map.fitBounds(e),google.maps.event.addListenerOnce(map,"idle",function(){is_fit_bounds_zoom=0})}function wpestate_fit_bounds_leaflet(e){if(is_fit_bounds_zoom=1,placeCircle!="")map.fitBounds(placeCircle.getBounds());else if(gmarkers.length===1){var t=gmarkers[0].getLatLng();map.panTo(t),map.setZoom(10),is_fit_bounds_zoom=0}else map.fitBounds(e),is_fit_bounds_zoom=0}function wpestate_classic_form_tax_visible(e,t){return e=e.toLowerCase(),e=decodeURI(e),t=t.toLowerCase(),t=decodeURI(t),e=e.split(" ").join("-"),t=t.split(" ").join("-"),t=t.split("'").join(""),e=e.latinise(),t=t.latinise(),e.indexOf(t)>-1}function wprentals_google_setMarkers(e,t){"use strict";var n,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,E,M,ie,C,F,oe,A,se,o,i,ne,s,z,D,N,L,R,P,H,I,B,V,$,W,U,K,q,Y,G,X,Q,Z,J,ee,te,x,k,S,T,a=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"),10);isNaN(a)&&(a=parseInt(jQuery("#google_map_on_list").attr("data-post_id"),10)),oe=parseInt(mapfunctions_vars.open_height,10),se=parseInt(mapfunctions_vars.closed_height,10),A=document.createElement("div"),i=jQuery(window).width(),o=700,ne=-215,i<900&&(o=500),i<600&&(o=400),i<400&&(o=200),z={content:A,disableAutoPan:!0,maxWidth:o,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},infoBox=new InfoBox(z);for(s=0;s<t.length;s++)n=t[s],r=n[10],c=n[1],l=n[2],F=decodeURIComponent(n[0]),M=n[8],E=n[3],N=decodeURIComponent(n[4]),h=decodeURIComponent(n[5]),m=decodeURIComponent(n[6]),f=decodeURIComponent(n[7]),p=decodeURIComponent(n[9]),d=decodeURIComponent(n[11]),v=decodeURIComponent(n[12]),b=n[13],j=n[14],y=n[15],_=n[16],w=decodeURIComponent(n[17]),O=decodeURIComponent(n[18]),D=decodeURIComponent(n[19]),u=decodeURIComponent(n[20]),g=decodeURIComponent(n[21]),mapfunctions_vars.custom_search==="yes"&&(s=1,L=n[19+s],R=n[20+s],P=n[21+s],H=n[22+s],I=n[23+s],B=n[24+s],V=n[25+s],$=n[26+s],W=n[27+s],U=n[28+s],K=n[29+s],q=n[30+s],Y=n[31+s],G=n[32+s],X=n[33+s],Q=n[34+s],Z=n[35+s],J=n[36+s],ee=n[37+s],te=n[38+s],T=n[39+s],S=n[40+s],k=n[41+s],x=n[42+s]),wpestate_createMarker(u,o,_,s,r,c,l,M,F,E,N,h,m,f,p,d,v,j,y,b,L,R,P,H,I,B,V,$,W,U,K,q,Y,G,X,Q,Z,J,ee,te,T,S,k,x,w,O,D,g),a===r&&(found_id=s);mapfunctions_vars.generated_pins!=="0"&&(C=new google.maps.LatLng(c,l),map_is_pan===0&&(wpestate_pan_to_last_pin(C),oms=new OverlappingMarkerSpiderfier(e),setOms(gmarkers),oms.addListener("spiderfy",function(){}),oms.addListener("unspiderfy ",function(){})),map_is_pan=0),(mapfunctions_vars.is_prop_list==="1"||mapfunctions_vars.is_tax==="1")&&wpestate_show_pins_filters_from_file()}function wpestate_createMarker(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,D,N,L,R,P,H,I,B,V,W,U,K,q,Y){"use strict";var G,Z,J=jQuery("<textarea />").html(c).text(),Q="",ee=0,X=new google.maps.LatLng(i,a);mapfunctions_vars.useprice==="yes"?(Q=" pin_price_info ",Z=new google.maps.LatLng(i,a),G=new WpstateMarker(g,p,e,ee,Z,map,J,l,d,o,u,h,m,f,s,v,b,j,n,U,K,r,Y)):(Q=" classic_info ",mapfunctions_vars.custom_search==="yes"?G=new google.maps.Marker({position:X,map,icon:custompin(r),custompin:r,shape,title:decodeURIComponent(c.replace(/\+/g," ")),zIndex:l,image:d,idul:o,price:u,category:h,action:m,link:f,city:p,area:g,infoWindowIndex:s,rooms:v,guest_no:b,size:n,cleanprice:j,category_name:U,action_name:K,slug1:y,val1:_,howto1:w,slug2:O,val2:x,howto2:C,slug3:E,val3:k,howto3:A,slug4:S,val4:M,howto4:F,slug5:T,val5:z,howto5:D,slug6:N,val6:L,howto6:I,slug7:P,val7:H,howto7:I,slug8:B,val8:V,howto8:W}):G=new google.maps.Marker({position:X,map,icon:custompin(r),custompin:r,shape,title:c,zIndex:l,image:d,idul:o,price:u,category:h,action:m,link:f,city:p,area:g,infoWindowIndex:s,rooms:v,guest_no:b,cleanprice:j,size:n,category_name:U,action_name:K,status:q,custom_info:Y})),gmarkers.push(G),typeof bounds_list!="undefined"&&bounds_list.extend(G.getPosition()),google.maps.event.addListener(G,"click",function(){if(wpestate_new_open_close_map(1),external_action_ondemand=1,this.image===""?r=mapfunctions_vars.path+"/idxdefault.jpg":r=this.image,typeof this.status!="undefined"?this.status.indexOf("%")!==-1?o=this.status:o=decodeURIComponent(this.status.replace(/-/g," ")):o="",m=decodeURIComponent(this.category.replace(/-/g," ")),c=decodeURIComponent(this.action.replace(/-/g," ")),d=decodeURIComponent(this.category_name.replace(/-/g," ")),l=decodeURIComponent(this.action_name.replace(/-/g," ")),u=wpestate_display_status(o),n=mapfunctions_vars.in_text,(m===""||c==="")&&(n=" "),n=" / ",this.guest_no!==""&&this.guest_no!=="0"&&this.guest_no!==0?a='<span id="infoguest">'+this.guest_no+"</span>":a="",this.rooms!==""?i='<span id="inforoom">'+this.rooms+"</span>":i="",h=this.title.toString(),this.custom_info!=="undefined"){var n,o,i,a,r,c,l,d,u,h,m,f,s=this.custom_info.split(",");i='<span id="inforoom" class="custom_infobox_icon"><i class="'+s[0]+'"></i>'+s[1]+"</span>",a='<span id="infoguest" class="custom_infobox_icon"><i class="'+s[2]+'"></i>'+s[3]+"</span>"}switch(infoBox.setContent('<div class="info_details '+Q+` "><span id="infocloser" onClick='javascript:infoBox.close();' ></span>`+u+'<a href="'+this.link+'"><div class="infogradient"></div><div class="infoimage" style="background-image:url('+r+')"  ></div></a><a href="'+this.link+'" id="infobox_title"> '+h+'</a><div class="prop_detailsx">'+d+" "+n+" "+l+'</div><div class="infodetails">'+a+i+'</div><div class="prop_pricex">'+this.price+"</div></div>"),infoBox.open(map,this),map.setCenter(this.position),t){case 700:document.getElementById("google_map_on_list")?map.panBy(0,-160):mapfunctions_vars.listing_map==="top"?document.getElementById("google_map_prop_list")?map.panBy(0,-100):map.panBy(100,-100):map.panBy(10,-110),f=0;break;case 500:document.getElementById("google_map_prop_list")?map.panBy(50,-120):map.panBy(50,-150);break;case 400:document.getElementById("google_map_prop_list")?map.panBy(100,-220):map.panBy(0,-150);break;case 200:map.panBy(20,-170);break}control_vars.show_adv_search_map_close==="no"&&($(".search_wrapper").addClass("adv1_close"),adv_search_click()),wpestate_close_adv_search()}),mapfunctions_vars.generated_pins!=="0"&&(map_is_pan===0&&wpestate_pan_to_last_pin(X),map_is_pan=1)}function wpestate_pan_to_last_pin(e){"use strict";wprentals_map_type===1?map.setCenter(e):wprentals_map_type===2&&map.panTo(e)}function setOms(e){"use strict";var t;for(t=0;t<e.length;t++)typeof oms!="undefined"&&oms.addMarker(e[t])}function wpestate_new_open_close_map(e){"use strict";var t,n,s,o,i,a;if(jQuery("#gmap_wrapper").hasClass("fullmap"))return;mapfunctions_vars.open_close_status!=="1"&&(i=jQuery("#googleMap").outerHeight(),o=parseInt(mapfunctions_vars.closed_height,10),t=parseInt(mapfunctions_vars.open_height,10),s=t,n=t,infoBox!==null&&infoBox.close(),i===o?(s=t,Modernizr.mq("only all and (max-width: 940px)")?n=t:(jQuery("#gmap-menu").show(),n=t),wpestate_new_show_advanced_search(),a=0,jQuery("#openmap").empty().append('<i class="fas fa-angle-up"></i>'+mapfunctions_vars.close_map)):e===2&&(jQuery("#gmap-menu").hide(),jQuery("#advanced_search_map_form").hide(),s=n=o,wpestate_new_hide_advanced_search(),a=150),jQuery("#googleMap").animate({height:s+"px"}),jQuery("#gmap_wrapper").animate({height:n+"px"},500,function(){wprentals_map_resize(),wprentals_map_type===1&&map.setOptions({scrollwheel:!0}),jQuery("#googleMap").addClass("scrollon"),jQuery(".tooltip").fadeOut("fast")}))}function wprentals_google_map_cluster(){"use strict";mapfunctions_vars.user_cluster==="yes"&&(clusterStyles=[{textColor:"#ffffff",opt_textColor:"#ffffff",url:images.cloud_pin,height:72,width:72,textSize:15}],mcOptions={gridSize:50,ignoreHidden:!0,maxZoom:parseInt(mapfunctions_vars.zoom_cluster,10),styles:clusterStyles},markers_cluster=new MarkerClusterer(map,gmarkers,mcOptions),markers_cluster.setIgnoreHidden(!0))}function wpestate_map_set_zoom_plus(){document.getElementById("gmapzoomminus")&&jQuery("#gmapzoomplus").on("click",function(){"use strict";var e=parseInt(map.getZoom(),10),e=e+1;e>20&&(e=20),map.setZoom(e)})}function wpestate_map_set_zoom_minus(){document.getElementById("gmapzoomminus")&&jQuery("#gmapzoomminus").on("click",function(){"use strict";var e=parseInt(map.getZoom(),10),e=e-1;e<3&&(e=3),map.setZoom(e)})}function wpestate_map_gmap_street(){jQuery("#gmapstreet").on("click",function(){"use strict";wpestate_toggleStreetView()})}function wpestate_map_geolocation_button(){document.getElementById("geolocation-button")&&jQuery("#geolocation-button").on("click",function(){"use strict";wprentals_myposition(map),wpestate_close_adv_search()}),document.getElementById("mobile-geolocation-button")&&google.maps.event.addDomListener(document.getElementById("mobile-geolocation-button"),"click",function(){"use strict";wprentals_myposition(map),wpestate_close_adv_search()}),jQuery("#mobile-geolocation-button,#geolocation-button").on("click",function(){"use strict";wprentals_myposition(map)})}function wprentals_myposition(){if(navigator.geolocation){var t,n="http:";location.protocol!="http:"&&(n="https:"),location.protocol==="https:"?navigator.geolocation.getCurrentPosition(wpestate_showMyPosition_original,errorCallback,{timeout:1e4}):jQuery.getJSON(n+"//ipinfo.io",function(e){t=e.loc.split(","),wprentals_showMyPosition(t)})}else alert(mapfunctions_vars.geo_no_brow)}function wpestate_showMyPosition_original(e){"use strict";if(wprentals_map_type===1){var t,n,o,i,r,a={coord:[1,1,1,38,38,59,59,1],type:"poly"},s=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);map.setCenter(s),t=new google.maps.Marker({position:s,map,icon:wpestate_custompinchild(),shape:a,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message}),o={strokeColor:"#67cfd8",strokeOpacity:.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:.2,map,center:s,radius:parseInt(mapfunctions_vars.geolocation_radius,10)},r=new google.maps.Circle(o),n=new Label({map}),n.bindTo("position",t),n.bindTo("text",t,"radius"),n.bindTo("visible",t),n.bindTo("clickable",t),n.bindTo("zIndex",t)}else i=[e.coords.latitude,e.coords.longitude],wprentals_draw_leaflet_circle(i)}function errorCallback(){"use strict";alert(mapfunctions_vars.geo_no_pos)}function wprentals_showMyPosition(e){"use strict";wprentals_map_type===1?wprentals_draw_google_circle(e):wprentals_map_type===2&&wprentals_draw_leaflet_circle(e)}function wprentals_draw_leaflet_circle(e){L.circle([e[0],e[1]],parseInt(mapfunctions_vars.geolocation_radius,10)).addTo(map);var t,o,i={iconUrl:wprentals_custompinchild_leaflet(),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]},s={riseOnHover:!0},n=L.latLng(e[0],e[1]);s.icon=L.icon(i),L.marker(n,s).addTo(map),t='<div class="wprentals_leaflet_label">',t+=parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message,t+="</div>",o=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:t}),L.marker(n,{icon:o}).addTo(map),map.panTo(n),map.setZoom(10)}function wprentals_draw_google_circle(e){var t,n,o,a,i={coord:[1,1,1,38,38,59,59,1],type:"poly"},s=new google.maps.LatLng(e[0],e[1]);map.setCenter(s),map.setZoom(13),t=new google.maps.Marker({position:s,map,icon:wpestate_custompinchild(),shape:i,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message}),o={strokeColor:"#67cfd8",strokeOpacity:.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:.2,map,center:s,radius:parseInt(mapfunctions_vars.geolocation_radius,10)},a=new google.maps.Circle(o),n=new Label({map}),n.bindTo("position",t),n.bindTo("text",t,"radius"),n.bindTo("visible",t),n.bindTo("clickable",t),n.bindTo("zIndex",t)}function wpestate_custompinchild(){"use strict";var e,t,s="",n=jQuery(window).dense("devicePixelRatio");return n>1&&(s="_2x"),images.userpin===""?e=mapfunctions_vars.path+"/userpin"+s+".png":(e=images.userpin,n>1&&(e=wpestate_get_custom_retina_pin(e))),t={url:e,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0)},n>1?(t={url:e,size:new google.maps.Size(44,50),scaledSize:new google.maps.Size(44,50),origin:new google.maps.Point(0,0),optimized:!1}):(t={url:e,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0)}),t}jQuery("#googleMap,#google_map_prop_list_wrapper").on("click",function(e){"use strict";var t=e.timeStamp-ipad_time;wprentals_map_type==1&&t>300&&(ipad_time=e.timeStamp,map.scrollwheel===!1?(wprentals_map_type===1&&map.setOptions({scrollwheel:!0}),jQuery("#googleMap").addClass("scrollon")):(wprentals_map_type===1&&map.setOptions({scrollwheel:!1}),jQuery("#googleMap").removeClass("scrollon")),jQuery(".tooltip").fadeOut("fast"),Modernizr.mq("only all and (max-width: 1025px)")&&(map.draggable===!1?map.setOptions({draggable:!0}):map.setOptions({draggable:!1})))}),jQuery("#google_map_on_list").on("click",function(){Modernizr.mq("only all and (max-width: 1025px)")&&(map.draggable===!1?map.setOptions({draggable:!0}):map.setOptions({draggable:!1}))}),document.getElementById("gmap")&&google.maps.event.addDomListener(document.getElementById("gmap"),"mouseout",function(){"use strict";wprentals_map_type===1&&map.setOptions({scrollwheel:!0}),wprentals_map_resize()}),document.getElementById("search_map_button")&&google.maps.event.addDomListener(document.getElementById("search_map_button"),"click",function(){"use strict";infoBox.close()}),document.getElementById("advanced_search_map_button")&&google.maps.event.addDomListener(document.getElementById("advanced_search_map_button"),"click",function(){"use strict";infoBox.close()});function wpestate_navigate_pins(){jQuery("#gmap-next").on("click",function(){"use strict";for(current_place++,external_action_ondemand=1,lealet_map_move_on_hover=1,current_place>gmarkers.length&&(current_place=1);gmarkers[current_place-1].visible===!1;)current_place++,current_place>gmarkers.length&&(current_place=1);map.getZoom()<15&&map.setZoom(15),wprentals_map_type===1?google.maps.event.trigger(gmarkers[current_place-1],"click"):wprentals_map_type===2&&(map.setView(gmarkers[current_place-1].getLatLng()),gmarkers[current_place-1]._icon||gmarkers[current_place-1].__parent.spiderfy(),lealet_map_move_on_hover=1,map.setZoom(20),current_place-1==0||current_place-1==gmarkers.length?setTimeout(function(){gmarkers[current_place-1].fire("click")},1e3):gmarkers[current_place-1].fire("click"),lealet_map_move_on_hover=1)}),jQuery("#gmap-prev").on("click",function(){for(lealet_map_move_on_hover=1,external_action_ondemand=1,current_place<1&&(current_place=gmarkers.length);gmarkers[current_place-1].visible===!1;)current_place--,current_place>gmarkers.length&&(current_place=1);map.getZoom()<15&&map.setZoom(15),wprentals_map_type===1?google.maps.event.trigger(gmarkers[current_place-1],"click"):wprentals_map_type===2&&(map.setView(gmarkers[current_place-1].getLatLng()),gmarkers[current_place-1]._icon||gmarkers[current_place-1].__parent.spiderfy(),lealet_map_move_on_hover=1,map.setZoom(20),current_place-1==0||current_place==gmarkers.length?setTimeout(function(){gmarkers[current_place-1].fire("click")},1e3):gmarkers[current_place-1].fire("click"),lealet_map_move_on_hover=1),current_place--})}if(jQuery(".advanced_action_div li").on("click",function(){"use strict";var e=jQuery(this).val()}),document.getElementById("gmap-menu")){//!visible_or_not(mapfunctions_vars.hows[0], gmarkers[i].val1, val1, mapfunctions_vars.slugs[0])
google.maps.event.addDomListener(document.getElementById("gmap-menu"),"click",function(e){"use strict";var t;infoBox.close(),e.target.nodeName==="INPUT"&&(t=e.target.className,e.target.name==="filter_action[]"&&(actions.indexOf(t)!==-1?actions.splice(actions.indexOf(t),1):actions.push(t)),e.target.name==="filter_type[]"&&(categories.indexOf(t)!==-1?categories.splice(categories.indexOf(t),1):categories.push(t)),show(actions,categories))})}function wpestate_visible_or_not(e,t,n,s){"use strict";var o,i,a;if(s==="property_price"&&mapfunctions_vars.slider_price==="yes")return i=parseInt(jQuery("#price_low").val(),10),a=parseInt(jQuery("#price_max").val(),10),t>=i&&t<=a;if(s==="none")return!0;if(n!==""&&n!==" "&&n!=="all"){if(o=parseInt(n,10),e==="greater")return t>=o;else if(e==="smaller")return t=parseInt(t,10),t<=o;else if(e==="equal")return t===n||n==="all";else if(e==="like")return t=t.toLowerCase(),n=n.toLowerCase(),t.indexOf(n)>-1;else if(e==="date bigger")return t=new Date(t),n=new Date(n),t>=n;else if(e==="date smaller")return t=new Date(t),n=new Date(n),t<=n}else return!0}function wpestate_get_custom_value(e){"use strict";var t;return e==="adv_categ"||e==="adv_actions"||e==="advanced_city"||e==="advanced_area"?t=jQuery("#"+e).attr("data-value"):e==="property_price"&&mapfunctions_vars.slider_price==="yes"?t=jQuery("#price_low").val():t=jQuery("#"+e).val(),t}function wprentals_show_pins(){"use strict";var e,t,n,s,o,i,a=parseInt(jQuery("#isgooglemap").attr("data-isgooglemap"),10);if(a!==1)return;if(t=0,i=jQuery("#advanced_city").attr("data-value"),s=jQuery("#advanced_area").attr("data-value"),n=parseInt(jQuery("#guest_no").val(),10),isNaN(n)&&(n=0),typeof infoBox!="undefined"&&infoBox!==null&&infoBox.close(),o=new google.maps.LatLngBounds,markers_cluster.setIgnoreHidden(!0),typeof gmarkers!="undefined"){for(e=0;e<gmarkers.length;e++)gmarkers[e].area!==s&&s!=="all"&&s!==""?gmarkers[e].setVisible(!1):gmarkers[e].city!==i&&i!=="all"?gmarkers[e].setVisible(!1):parseInt(gmarkers[e].guests,10)!==n&&n!==0?gmarkers[e].setVisible(!1):(gmarkers[e].setVisible(!0),++t,o.extend(gmarkers[e].getPosition()));markers_cluster.repaint()}mapfunctions_vars.generated_pins==="0"?t===0?(jQuery("#gmap-noresult").show(),jQuery("#results").hide()):(jQuery("#gmap-noresult").hide(),o.isEmpty()||wpestate_fit_bounds(o),jQuery("#results, #showinpage,#showinpage_mobile").show(),jQuery("#results_no").show().empty().append(t)):wpestate_get_filtering_ajax_result()}function wpestate_convertToSlug(e){"use strict";return e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}function custompin(e){"use strict";if(!mapfunctions_vars.hidden_map)return e={path:google.maps.SymbolPath.CIRCLE,scale:60,fillColor:"#b881fc",fillOpacity:.4,strokeWeight:.4},e;var t,s="",n=jQuery(window).dense("devicePixelRatio");return n>1&&(s="_2x"),mapfunctions_vars.use_single_image_pin==="no"?(e!==""?images[e]===""?t=mapfunctions_vars.path+"/"+e+s+".png":(t=images[e],n>1&&(t=t.replace(".png","_2x.png"))):t=mapfunctions_vars.path+"/none.png",typeof t=="undefined"&&(t=mapfunctions_vars.path+"/none.png")):n>1?t=wpestate_get_custom_retina_pin(images.single_pin):t=images.single_pin,n>1?e={url:t,size:new google.maps.Size(44,50),scaledSize:new google.maps.Size(44,50),origin:new google.maps.Point(0,0),optimized:!1}:e={url:t,size:new google.maps.Size(44,50),origin:new google.maps.Point(0,0)},e}function wprentals_custompinhover(){"use strict";var e,t,o,n="",s=jQuery(window).dense("devicePixelRatio");return s>1&&(n="_2x"),e=mapfunctions_vars.path+"/hover"+n+".png",wprentals_map_type===2?(o=L.icon({iconUrl:e,iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]}),o):(t={url:e,size:new google.maps.Size(44,50),origin:new google.maps.Point(0,0)},s>1?t={url:e,size:new google.maps.Size(44,50),scaledSize:new google.maps.Size(44,50),origin:new google.maps.Point(0,0),optimized:!1}:t={url:e,size:new google.maps.Size(44,50),origin:new google.maps.Point(0,0)},t)}function wpestate_get_custom_retina_pin(e){"use strict";var t=e.replace(".png","_2x.png");return jQuery.get(t).done(function(){e=t}).fail(function(){}),e}function Label(e){"use strict";this.setValues(e);var t,n=this.span_=document.createElement("span");n.style.cssText="position: relative; left: -50%; top: 8px; white-space: nowrap;  padding: 2px; background-color: white;opacity:0.7",t=this.div_=document.createElement("div"),t.appendChild(n),t.style.cssText="position: absolute; display: none"}typeof google=="object"&&typeof google.maps=="object"&&(Label.prototype=new google.maps.OverlayView,Label.prototype.onAdd=function(){var e,t=this.getPanes().overlayImage;t.appendChild(this.div_),e=this,this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){e.draw()}),google.maps.event.addListener(this,"visible_changed",function(){e.draw()}),google.maps.event.addListener(this,"clickable_changed",function(){e.draw()}),google.maps.event.addListener(this,"text_changed",function(){e.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){e.draw()}),google.maps.event.addDomListener(this.div_,"click",function(){e.get("clickable")&&google.maps.event.trigger(e,"click")})]},Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var e=0,t=this.listeners_.length;e<t;++e)google.maps.event.removeListener(this.listeners_[e])},Label.prototype.draw=function(){var n,s,o,i=this.getProjection(),t=i.fromLatLngToDivPixel(this.get("position")),e=this.div_;e.style.left=t.x+"px",e.style.top=t.y+"px",n=this.get("visible"),e.style.display=n?"block":"none",s=this.get("clickable"),this.span_.style.cursor=s?"pointer":"",o=this.get("zIndex"),e.style.zIndex=o,this.span_.innerHTML=this.get("text").toString()});function wpestate_close_adv_search(){}function wpestate_new_show_advanced_search(){"use strict";jQuery("#search_wrapper").removeClass("hidden")}function wpestate_new_hide_advanced_search(){"use strict";mapfunctions_vars.show_adv_search==="no"&&jQuery("#search_wrapper").addClass("hidden")}function wpestate_set_filter_pins(e,t){"use strict";if(wprentals_map_type===1){for(var n=0;n<gmarkers.length;n++)gmarkers[n].setVisible(!1),gmarkers[n].setMap(null);gmarkers=[],typeof markers_cluster!="undefined"&&markers_cluster.clearMarkers(),t.length>0&&(bounds_list=new google.maps.LatLngBounds,wprentals_map_general_set_markers(e,t),wprentals_google_map_cluster(),wprentals_google_fit_to_bounds())}else if(wprentals_map_type===2){if(mapfunctions_vars.user_cluster==="yes")e.removeLayer(markers_cluster);else for(n=0;n<gmarkers.length;n++)e.removeLayer(gmarkers[n]);gmarkers=[],markers_cluster=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(e){return L.divIcon({html:'<div class="leaflet_cluster" style="background-image: url('+images.cloud_pin+')">'+e.getChildCount()+"</div>"})}}),t.length>0&&(bounds_list=0[0],wprentals_map_general_set_markers(e,t),wprentals_map_general_cluster(),wprentals_map_general_fit_to_bounds()),wprentals_map_general_cluster()}}function wpestate_set_filter_pins_ondemand(e,t){"use strict";if(wprentals_map_type===1){for(var n=0;n<gmarkers.length;n++)gmarkers[n].setVisible(!1),gmarkers[n].setMap(null);gmarkers=[],t.length>0&&(typeof markers_cluster!="undefined"&&markers_cluster.clearMarkers(),wprentals_google_setMarkers(e,t),wprentals_google_map_cluster()),oms=new OverlappingMarkerSpiderfier(e),setOms(gmarkers),oms.addListener("spiderfy",function(){}),oms.addListener("unspiderfy ",function(){})}else if(wprentals_map_type===2){if(mapfunctions_vars.user_cluster==="yes")e.removeLayer(markers_cluster);else for(n=0;n<gmarkers.length;n++)e.removeLayer(gmarkers[n]);gmarkers=[],markers_cluster=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(e){return L.divIcon({html:'<div class="leaflet_cluster" style="background-image: url('+images.cloud_pin+')">'+e.getChildCount()+"</div>"})}}),t.length>0&&(bounds_list=e.getBounds(),wprentals_map_general_set_markers(e,t)),wprentals_map_general_cluster()}}function wpestate_hover_action_pin(e){"use strict";wpestate_hover_action_flag=1;for(var t=0;t<gmarkers.length;t++)parseInt(gmarkers[t].idul,10)===parseInt(e,10)&&(wprentals_map_type===1?(google.maps.event.trigger(gmarkers[t],"click"),map_geo_first_load=0,mapfunctions_vars.useprice!=="yes"?gmarkers[t].setIcon(wprentals_custompinhover()):gmarkers[t].addHoverClass(),marker_zindex=gmarkers[t].getZIndex(),gmarkers[t].setZIndex(9999999)):wprentals_map_type===2&&(lealet_map_move_on_hover=1,gmarkers[t]._icon||gmarkers[t].__parent.spiderfy(),map.panTo(gmarkers[t].getLatLng()),gmarkers[t].togglePopup(),mapfunctions_vars.useprice!=="yes"?gmarkers[t].setIcon(wprentals_custompinhover()):L.DomUtil.addClass(gmarkers[t]._icon,"openstreet_price_marker_on_click_parent")))}function wpestate_return_hover_action_pin(e){"use strict";wpestate_hover_action_flag=0,map_geo_first_load=1,external_action_ondemand=0;for(var n,t=0;t<gmarkers.length;t++)parseInt(gmarkers[t].idul,10)===parseInt(e,10)&&(wprentals_map_type===1?parseInt(gmarkers[t].idul,10)===parseInt(e,10)&&(infoBox.close(),mapfunctions_vars.useprice!=="yes"?gmarkers[t].setIcon(custompin(gmarkers[t].custompin)):gmarkers[t].removeHoverClass(),gmarkers[t].setZIndex(marker_zindex)):wprentals_map_type===2&&(gmarkers[t].togglePopup(),lealet_map_move_on_hover=0,mapfunctions_vars.useprice!=="yes"?(n=L.icon({iconUrl:wprentals_custompin_leaflet(gmarkers[t].pin),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]}),gmarkers[t].setIcon(n)):L.DomUtil.removeClass(gmarkers[t]._icon,"openstreet_price_marker_on_click_parent")))}String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},wpestate_initialize_poi=function(e,t){if(parseInt(mapbase_vars.wprentals_map_type)!==1)return;var n,i,a,r,c=new google.maps.places.PlacesService(e),s="",d="",l=e.getBounds(),o=".google_poi";t==2&&(o=".google_poish"),jQuery(o).on("click",function(t){t.stopPropagation(),poi_type=jQuery(this).attr("id");var o,r=e.getCenter(),d=i(poi_type);jQuery(this).hasClass("poi_active")?n(poi_type,"hide"):(s=n(poi_type,"show"),s===1&&(o={location:r,types:d,bounds:l,radius:2500},c.nearbySearch(o,function(t,n){a(t,n,e)}))),jQuery(this).toggleClass("poi_active")}),i=function(e){var t;switch(e){case"transport":t=["bus_station","airport","train_station","subway_station"];break;case"supermarkets":t=["grocery_or_supermarket","shopping_mall"];break;case"schools":t=["school","university"];break;case"restaurant":t=["restaurant"];break;case"pharma":t=["pharmacy"];break;case"hospitals":t=["hospital"];break}return t},a=function(e,t,n){if(google.maps.places.PlacesServiceStatus.OK==t)for(var o,i,s=0;s<e.length;s++)o=r(e[s],n),poi_marker_array.push(o)},r=function(e,t){marker=new google.maps.Marker({map:t,position:e.geometry.location,show_poi:poi_type,icon:mapfunctions_vars.path+"/poi/"+poi_type+".png"});var s=document.createElement("div"),n=new InfoBox({content:s,boxClass:"estate_poi_box",pixelOffset:new google.maps.Size(-30,-70),zIndex:null,maxWidth:275,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),pane:"floatPane",enableEventPropagation:!1});return google.maps.event.addListener(marker,"mouseover",function(){n.setContent(e.name),n.open(map,this)}),google.maps.event.addListener(marker,"mouseout",function(){n!==null&&n.close()}),marker},n=function(e,t){for(var s=1,n=0;n<poi_marker_array.length;n++)poi_marker_array[n].show_poi===e&&(t==="hide"?poi_marker_array[n].setVisible(!1):(poi_marker_array[n].setVisible(!0),s=0));return s}};function wpestate_makeSafeForCSS(e){return e.replace(/[^a-z0-9]/g,function(e){var t=e.charCodeAt(0);return t==32?"-":t>=65&&t<=90?e.toLowerCase():("000"+t.toString(16)).slice(-4)})}