(function(e,t){if(typeof define=="function"&&define.amd)define(["moment","jquery"],function(e,n){return n.fn||(n.fn={}),typeof e!="function"&&e.default&&(e=e.default),t(e,n)});else if(typeof module=="object"&&module.exports){var s,n=typeof window!="undefined"?window.jQuery:0[0];n||(n=require("jquery"),n.fn||(n.fn={})),s=typeof window!="undefined"&&typeof window.moment!="undefined"?window.moment:require("moment"),module.exports=t(s,n)}else e.daterangepicker=t(e.moment,e.jQuery)})(this,function(e,t){var n=function(n,s,o){if(this.parentEl="body",this.element=t(n),this.startDate=e().startOf("day"),this.endDate=e().endOf("day"),this.minDate=!1,this.minDateSpan=!1,this.maxDate=!1,this.maxSpan=!1,this.minSpan=!1,this.start_date_picked=0,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=e().subtract(100,"year").format("YYYY"),this.maxYear=e().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:e.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},(typeof s!="object"||s===null)&&(s={}),s=t.extend(this.element.data(),s),typeof s.showPrice=="boolean"&&(this.showPrice=s.showPrice),typeof s.template!="string"&&!(s.template instanceof t)&&(s.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div>'),show_daterange_picker_custom_mess==="yes"&&(s.template=s.template+'<div class="wpestate_section">'+daterangepicker_vars.pls_select+' <span class="wpestate_section_start">'+daterangepicker_vars.start_date+" </span> "+daterangepicker_vars.to+' <span class="wpestate_section_end">'+daterangepicker_vars.end_date+"</span></div>"),s.template=s.template+"</div>",this.parentEl=t(s.parentEl&&t(s.parentEl).length?s.parentEl:this.parentEl),this.container=t(s.template).appendTo(this.parentEl),typeof s.locale=="object"&&(typeof s.locale.direction=="string"&&(this.locale.direction=s.locale.direction),typeof s.locale.format=="string"&&(this.locale.format=s.locale.format),typeof s.locale.separator=="string"&&(this.locale.separator=s.locale.separator),typeof s.locale.daysOfWeek=="object"&&(this.locale.daysOfWeek=s.locale.daysOfWeek.slice()),typeof s.locale.monthNames=="object"&&(this.locale.monthNames=s.locale.monthNames.slice()),typeof s.locale.firstDay=="number"&&(this.locale.firstDay=s.locale.firstDay),typeof s.locale.applyLabel=="string"&&(this.locale.applyLabel=s.locale.applyLabel),typeof s.locale.cancelLabel=="string"&&(this.locale.cancelLabel=s.locale.cancelLabel),typeof s.locale.weekLabel=="string"&&(this.locale.weekLabel=s.locale.weekLabel),typeof s.locale.customRangeLabel=="string"&&(l=document.createElement("textarea"),l.innerHTML=s.locale.customRangeLabel,u=l.value,this.locale.customRangeLabel=u)),this.container.addClass(this.locale.direction),typeof s.startDate=="string"&&(this.startDate=e(s.startDate,this.locale.format)),typeof s.endDate=="string"&&(this.endDate=e(s.endDate,this.locale.format)),typeof s.minDate=="string"&&(this.minDate=e(s.minDate,this.locale.format)),typeof s.maxDate=="string"&&(this.maxDate=e(s.maxDate,this.locale.format)),typeof s.startDate=="object"&&(this.startDate=e(s.startDate)),typeof s.endDate=="object"&&(this.endDate=e(s.endDate)),typeof s.minDate=="object"&&(this.minDate=e(s.minDate)),typeof s.maxDate=="object"&&(this.maxDate=e(s.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),typeof s.applyButtonClasses=="string"&&(this.applyButtonClasses=s.applyButtonClasses),typeof s.applyClass=="string"&&(this.applyButtonClasses=s.applyClass),typeof s.cancelButtonClasses=="string"&&(this.cancelButtonClasses=s.cancelButtonClasses),typeof s.cancelClass=="string"&&(this.cancelButtonClasses=s.cancelClass),typeof s.maxSpan=="object"&&(this.maxSpan=s.maxSpan),typeof s.minSpan=="object"&&(this.minSpan=s.minSpan),typeof s.dateLimit=="object"&&(this.maxSpan=s.dateLimit),typeof s.opens=="string"&&(this.opens=s.opens),typeof s.drops=="string"&&(this.drops=s.drops),typeof s.showWeekNumbers=="boolean"&&(this.showWeekNumbers=s.showWeekNumbers),typeof s.showISOWeekNumbers=="boolean"&&(this.showISOWeekNumbers=s.showISOWeekNumbers),typeof s.buttonClasses=="string"&&(this.buttonClasses=s.buttonClasses),typeof s.buttonClasses=="object"&&(this.buttonClasses=s.buttonClasses.join(" ")),typeof s.showDropdowns=="boolean"&&(this.showDropdowns=s.showDropdowns),typeof s.minYear=="number"&&(this.minYear=s.minYear),typeof s.maxYear=="number"&&(this.maxYear=s.maxYear),typeof s.showCustomRangeLabel=="boolean"&&(this.showCustomRangeLabel=s.showCustomRangeLabel),typeof s.singleDatePicker=="boolean"&&(this.singleDatePicker=s.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),typeof s.timePicker=="boolean"&&(this.timePicker=s.timePicker),typeof s.timePickerSeconds=="boolean"&&(this.timePickerSeconds=s.timePickerSeconds),typeof s.timePickerIncrement=="number"&&(this.timePickerIncrement=s.timePickerIncrement),typeof s.timePicker24Hour=="boolean"&&(this.timePicker24Hour=s.timePicker24Hour),typeof s.autoApply=="boolean"&&(this.autoApply=s.autoApply),typeof s.autoUpdateInput=="boolean"&&(this.autoUpdateInput=s.autoUpdateInput),typeof s.linkedCalendars=="boolean"&&(this.linkedCalendars=s.linkedCalendars),typeof s.isInvalidDate=="function"&&(this.isInvalidDate=s.isInvalidDate),typeof s.isCustomDate=="function"&&(this.isCustomDate=s.isCustomDate),typeof s.alwaysShowCalendars=="boolean"&&(this.alwaysShowCalendars=s.alwaysShowCalendars),this.locale.firstDay!=0)for(m=this.locale.firstDay;m>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),m--;if(typeof s.startDate=="undefined"&&typeof s.endDate=="undefined"&&t(this.element).is(":text")){var i,a,r,c,l,d,u,m,h=t(this.element).val(),f=h.split(this.locale.separator);i=a=null,f.length==2?(i=e(f[0],this.locale.format),a=e(f[1],this.locale.format)):this.singleDatePicker&&h!==""&&(i=e(h,this.locale.format),a=e(h,this.locale.format)),i!==null&&a!==null&&(this.setStartDate(i),this.setEndDate(a))}if(typeof s.ranges=="object"){for(r in s.ranges){if(typeof s.ranges[r][0]=="string"?i=e(s.ranges[r][0],this.locale.format):i=e(s.ranges[r][0]),typeof s.ranges[r][1]=="string"?a=e(s.ranges[r][1],this.locale.format):a=e(s.ranges[r][1]),this.minDate&&i.isBefore(this.minDate)&&(i=this.minDate.clone()),c=this.maxDate,this.maxSpan&&c&&i.clone().add(this.maxSpan).isAfter(c)&&(c=i.clone().add(this.maxSpan)),c&&a.isAfter(c)&&(a=c.clone()),this.minSpan&&(this.minDateSpan=i.clone().add(this.minSpan)),this.minDate&&a.isBefore(this.minDate,this.timepicker?"minute":"day")||c&&i.isAfter(c,this.timepicker?"minute":"day"))continue;l=document.createElement("textarea"),l.innerHTML=r,u=l.value,this.ranges[u]=[i,a]}d="<ul>";for(r in this.ranges)d+='<li data-range-key="'+r+'">'+r+"</li>";this.showCustomRangeLabel&&(d+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),d+="</ul>",this.container.find(".ranges").prepend(d)}typeof o=="function"&&(this.callback=o),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),typeof s.ranges=="object"&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply")),(typeof s.ranges=="undefined"&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",t.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",t.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",t.proxy(this.toggle,this))),this.updateElement()};return n.prototype={constructor:n,setStartDate:function(t){typeof t=="string"&&(this.startDate=e(t,this.locale.format)),typeof t=="object"&&(this.startDate=e(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(t){typeof t=="string"&&(this.endDate=e(t,this.locale.format)),typeof t=="object"&&(this.endDate=e(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").prop("disabled",!1).removeClass("disabled"):this.container.find(".right .calendar-time select").prop("disabled",!0).addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())?this.rightCalendar.month=this.endDate.clone().date(2):this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month")}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){if(this.endDate){if(e=parseInt(this.container.find(".left .hourselect").val(),10),t=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),s=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var e,t,s,n=this.container.find(".left .ampmselect").val();n==="PM"&&e<12&&(e+=12),n==="AM"&&e===12&&(e=0)}}else e=parseInt(this.container.find(".right .hourselect").val(),10),t=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),s=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(n=this.container.find(".right .ampmselect").val(),n==="PM"&&e<12&&(e+=12),n==="AM"&&e===12&&(e=0));this.leftCalendar.month.hour(e).minute(t).second(s),this.rightCalendar.month.hour(e).minute(t).second(s)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),this.endDate==null)return;this.calculateChosenLabel()},renderCalendar:function(n){s=n=="left"?this.leftCalendar:this.rightCalendar,x=s.month.month(),E=s.month.year(),W=s.month.hour(),P=s.month.minute(),S=s.month.second(),B=e([E,x]).daysInMonth(),j=e([E,x,1]),V=e([E,x,B]),D=e(j).subtract(1,"month").month(),M=e(j).subtract(1,"month").year(),w=e([M,D]).daysInMonth(),T=j.day(),s=[],s.firstDay=j,s.lastDay=V;for(c=0;c<6;c++)s[c]=[];v=w-T+this.locale.firstDay+1,v>w&&(v-=7),T==this.locale.firstDay&&(v=w-6);for(var s,a,r,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,E,k,A,S,M,F,T,z,D,N,L,R,P,H,I,B,V,$,W,U,K,q,Y,C=e([M,D,v,12,P,S]),c=0,i=0,o=0;c<42;c++,i++,C=e(C).add(24,"hour"))c>0&&i%7===0&&(i=0,o++),s[o][i]=C.clone().hour(W).minute(P).second(S),C.hour(12),this.minDate&&s[o][i].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&s[o][i].isBefore(this.minDate)&&n=="left"&&(s[o][i]=this.minDate.clone()),this.maxDate&&s[o][i].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&s[o][i].isAfter(this.maxDate)&&n=="right"&&(s[o][i]=this.maxDate.clone());if(n=="left"?this.leftCalendar.calendar=s:this.rightCalendar.calendar=s,u=n=="left"?this.minDate:this.startDate,l=this.maxDate,q=n=="left"?this.startDate:this.endDate,Y=this.locale.direction=="ltr"?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},r='<table class="table-condensed">',r+="<thead>",r+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(r+="<th></th>"),(!u||u.isBefore(s.firstDay))&&(!this.linkedCalendars||n=="left")?r+='<th class="prev available"><span></span></th>':r+="<th></th>",L=this.locale.monthNames[s[1][1].month()]+s[1][1].format(" YYYY"),this.showDropdowns){for(N=s[1][1].month(),A=s[1][1].year(),z=l&&l.year()||this.maxYear,H=u&&u.year()||this.minYear,K=A==H,U=A==z,b='<select class="monthselect">',d=0;d<12;d++)(!K||u&&d>=u.month())&&(!U||l&&d<=l.month())?b+="<option value='"+d+"'"+(d===N?" selected='selected'":"")+">"+this.locale.monthNames[d]+"</option>":b+="<option value='"+d+"'"+(d===N?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[d]+"</option>";b+="</select>";for(k='<select class="yearselect">',h=H;h<=z;h++)k+='<option value="'+h+'"'+(h===A?' selected="selected"':"")+">"+h+"</option>";k+="</select>",L=b+k}r+='<th colspan="5" class="month">'+L+"</th>",(!l||l.isAfter(s.lastDay))&&(!this.linkedCalendars||n=="right"||this.singleDatePicker)?r+='<th class="next available"><span></span></th>':r+="<th></th>",r+="</tr>",r+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(r+='<th class="week">'+this.locale.weekLabel+"</th>"),t.each(this.locale.daysOfWeek,function(e,t){r+="<th>"+t+"</th>"}),r+="</tr>",r+="</thead>",r+="<tbody>",this.endDate==null&&this.maxSpan&&(R=this.startDate.clone().add(this.maxSpan).endOf("day"),(!l||R.isBefore(l))&&(l=R)),this.endDate==null&&this.minSpan&&(m=this.startDate.clone().add(this.minSpan).endOf("day"),(!u||m.isAfter(u))&&(this.minDateSpan=m));for(o=0;o<6;o++){r+="<tr>",this.showWeekNumbers?r+='<td class="week">'+s[o][0].week()+"</td>":this.showISOWeekNumbers&&(r+='<td class="week">'+s[o][0].isoWeek()+"</td>");for(i=0;i<7;i++){if(a=[],s[o][i].isSame(new Date,"day")&&a.push("today"),s[o][i].isoWeekday()>5&&a.push("weekend"),s[o][i].month()!=s[1][1].month()&&a.push("off","ends"),this.minDate&&s[o][i].isBefore(this.minDate,"day")&&a.push("off","disabled"),l&&s[o][i].isAfter(l,"day")&&a.push("off","disabled"),O=s[o][i].year()+"/"+(s[o][i].month()+1)+"/"+s[o][i].date(),I=control_vars.date_format.toUpperCase(),y=e(O,"YYYY-M-DD").format(I),_=e(O,"YYYY-M-DD").valueOf(),this.element[0].id==="start_date"){if(wpestate_booking_invalid_Date_new(_)==="is_block_check_in_check_out"?a.push("check_in_block","disabled"):wpestate_booking_invalid_Date_new(_)==="is_block_check_in"&&a.push("check_in_block_is_block_check_in","disabled"),this.start_date_picked===1&&s[o][i].isAfter(this.startDate,"day")){for(c=0;c<a.length;c++)a[c]==="check_in_block_is_block_check_in"&&a.splice(c,1);for(c=0;c<a.length;c++)a[c]==="disabled"&&a.splice(c,1)}typeof mega_details=="object"?(f=e(this.startDate).utc().add(e(this.startDate).utcOffset(),"minutes").valueOf(),f=f/1e3,mega_details[f]!=0[0]&&(minim_days=parseFloat(mega_details[f].period_min_days_booking,10),$={days:minim_days},m=this.startDate.clone().add($).endOf("day"),this.minDateSpan=m),this.minDateSpan&&this.startDate&&s[o][i].isBefore(this.minDateSpan,"day")&&s[o][i].isAfter(this.startDate,"day")&&(a.push("wpestate_min_days_required","disabled"),a.push("off","disabled"))):this.minDateSpan&&this.startDate&&s[o][i].isBefore(this.minDateSpan,"day")&&s[o][i].isAfter(this.startDate,"day")&&(a.push("wpestate_min_days_required","disabled"),a.push("off","disabled"))}this.isInvalidDate(s[o][i])&&a.push("off","disabled"),s[o][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&a.push("active","start-date"),this.endDate!=null&&s[o][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&a.push("active","end-date"),this.endDate!=null&&s[o][i]>this.startDate&&s[o][i]<this.endDate&&a.push("in-range"),g=this.isCustomDate(s[o][i]),g!==!1&&(typeof g=="string"?a.push(g):Array.prototype.push.apply(a,g));for(p="",F=!1,c=0;c<a.length;c++)p+=a[c]+" ",a[c]=="disabled"&&(F=!0);F||(p+="available"),typeof wpestate_show_price_Daterangepicker=="function"&&this.element[0].id==="start_date"?r+='<td class="infome_unix wpestate_booking_class '+p.replace(/^\s+|\s+$/g,"")+'"x2 data-custom="'+y+'" data-custom-mes="'+y+'" data-title="r'+o+"c"+i+'">'+s[o][i].date()+'<div class="wpestate_show_price_calendar">'+wpestate_show_price_Daterangepicker(_)+"</div></td>":r+='<td class="'+p.replace(/^\s+|\s+$/g,"")+'"x1 data-custom="'+O+'" data-custom-mes="'+y+'" data-title="r'+o+"c"+i+'">'+s[o][i].date()+"</td>"}r+="</tr>"}r+="</tbody>",r+="</table>",this.container.find(".drp-calendar."+n+" .calendar-table").html(r)},renderTimePicker:function(e){if(e=="right"&&!this.endDate)return;var t,n,s,o,a,r,c,l,d,u,h,m,f,p,i=this.maxDate;this.maxSpan&&(!this.maxDate||this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate))&&(i=this.startDate.clone().add(this.maxSpan)),e=="left"?(n=this.startDate.clone(),a=this.minDate):e=="right"&&(n=this.endDate.clone(),a=this.startDate,l=this.container.find(".drp-calendar.right .calendar-time"),l.html()!=""&&(n.hour(isNaN(n.hour())?l.find(".hourselect option:selected").val():n.hour()),n.minute(isNaN(n.minute())?l.find(".minuteselect option:selected").val():n.minute()),n.second(isNaN(n.second())?l.find(".secondselect option:selected").val():n.second()),this.timePicker24Hour||(m=l.find(".ampmselect option:selected").val(),m==="PM"&&n.hour()<12&&n.hour(n.hour()+12),m==="AM"&&n.hour()===12&&n.hour(0))),n.isBefore(this.startDate)&&(n=this.startDate.clone()),i&&n.isAfter(i)&&(n=i.clone()));for(s='<select class="hourselect">',p=this.timePicker24Hour?0:1,f=this.timePicker24Hour?23:12,t=p;t<=f;t++)d=t,this.timePicker24Hour||(d=n.hour()>=12?t==12?12:t+12:t==12?0:t),r=n.clone().hour(d),o=!1,a&&r.minute(59).isBefore(a)&&(o=!0),i&&r.minute(0).isAfter(i)&&(o=!0),d==n.hour()&&!o?s+='<option value="'+t+'" selected="selected">'+t+"</option>":o?s+='<option value="'+t+'" disabled="disabled" class="disabled">'+t+"</option>":s+='<option value="'+t+'">'+t+"</option>";s+="</select> ",s+=': <select class="minuteselect">';for(t=0;t<60;t+=this.timePickerIncrement)c=t<10?"0"+t:t,r=n.clone().minute(t),o=!1,a&&r.second(59).isBefore(a)&&(o=!0),i&&r.second(0).isAfter(i)&&(o=!0),n.minute()==t&&!o?s+='<option value="'+t+'" selected="selected">'+c+"</option>":o?s+='<option value="'+t+'" disabled="disabled" class="disabled">'+c+"</option>":s+='<option value="'+t+'">'+c+"</option>";if(s+="</select> ",this.timePickerSeconds){s+=': <select class="secondselect">';for(t=0;t<60;t++)c=t<10?"0"+t:t,r=n.clone().second(t),o=!1,a&&r.isBefore(a)&&(o=!0),i&&r.isAfter(i)&&(o=!0),n.second()==t&&!o?s+='<option value="'+t+'" selected="selected">'+c+"</option>":o?s+='<option value="'+t+'" disabled="disabled" class="disabled">'+c+"</option>":s+='<option value="'+t+'">'+c+"</option>";s+="</select> "}this.timePicker24Hour||(s+='<select class="ampmselect">',u="",h="",a&&n.clone().hour(12).minute(0).second(0).isBefore(a)&&(u=' disabled="disabled" class="disabled"'),i&&n.clone().hour(0).minute(0).second(0).isAfter(i)&&(h=' disabled="disabled" class="disabled"'),n.hour()>=12?s+='<option value="AM"'+u+'>AM</option><option value="PM" selected="selected"'+h+">PM</option>":s+='<option value="AM" selected="selected"'+u+'>AM</option><option value="PM"'+h+">PM</option>",s+="</select>"),this.container.find(".drp-calendar."+e+" .calendar-time").html(s)},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").prop("disabled",!1):this.container.find("button.applyBtn").prop("disabled",!0)},move:function(){var e,n,o,i,s={top:0,left:0},a=t(window).width();this.parentEl.is("body")||(s={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},a=this.parentEl[0].clientWidth+this.parentEl.offset().left),this.drops=="up"?e=this.element.offset().top-this.container.outerHeight()-s.top:e=this.element.offset().top+this.element.outerHeight()-s.top,this.container.css({top:0,left:0,right:"auto"}),o=this.container.outerWidth(),this.container[this.drops=="up"?"addClass":"removeClass"]("drop-up"),this.opens=="left"?(i=a-this.element.offset().left-this.element.outerWidth(),o+i>t(window).width()?this.container.css({top:e,right:"auto",left:9}):this.container.css({top:e,right:i,left:"auto"})):this.opens=="center"?(n=this.element.offset().left-s.left+this.element.outerWidth()/2-o/2,n<0?this.container.css({top:e,right:"auto",left:9}):n+o>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:n,right:"auto"})):(n=this.element.offset().left-s.left,n+o>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:n,right:"auto"}))},show:function(){if(this.isShowing)return;this._outsideClickProxy=t.proxy(function(e){this.outsideClick(e)},this),t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),t(window).on("resize.daterangepicker",t.proxy(function(e){this.move(e)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0},hide:function(){if(!this.isShowing)return;this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))&&this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),t(document).off(".daterangepicker"),t(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1},toggle:function(){this.isShowing?this.hide():this.show()},outsideClick:function(e){var n=t(e.target);if(e.type=="focusin"||n.closest(this.element).length||n.closest(this.container).length||n.closest(".calendar-table").length)return;this.hide(),this.element.trigger("outsideClick.daterangepicker",this)},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(e){var n,t=e.target.getAttribute("data-range-key");this.chosenLabel=t,t==this.locale.customRangeLabel?this.showCalendars():(n=this.ranges[t],this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(e){var n=t(e.target).parents(".drp-calendar");n.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var n=t(e.target).parents(".drp-calendar");n.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(!t(e.target).hasClass("available"))return;var n=t(e.target).attr("data-title"),s=n.substr(1,1),o=n.substr(3,1),a=t(e.target).parents(".drp-calendar"),i=a.hasClass("left")?this.leftCalendar.calendar[s][o]:this.rightCalendar.calendar[s][o],r=this.leftCalendar,c=this.rightCalendar,l=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each(function(e,n){if(t(n).hasClass("week"))return;var o=t(n).attr("data-title"),a=o.substr(1,1),d=o.substr(3,1),u=t(n).parents(".drp-calendar"),s=u.hasClass("left")?r.calendar[a][d]:c.calendar[a][d];s.isAfter(l)&&s.isBefore(i)||s.isSame(i,"day")?t(n).addClass("in-range"):t(n).removeClass("in-range")})},clickDate:function(e){if(who_is=1,jQuery(".wpestate_calendar").removeClass("minim_days_reservation").removeClass("wpestate_min_days_required"),!t(e.target).hasClass("available"))return;var n,s,i,a,r,u,h,f,d=t(e.target).attr("data-title"),l=d.substr(1,1),c=d.substr(3,1),m=t(e.target).parents(".drp-calendar"),o=m.hasClass("left")?this.leftCalendar.calendar[l][c]:this.rightCalendar.calendar[l][c];this.endDate||o.isBefore(this.startDate,"day")?(this.timePicker&&(n=parseInt(this.container.find(".left .hourselect").val(),10),this.timePicker24Hour||(i=this.container.find(".left .ampmselect").val(),i==="PM"&&n<12&&(n+=12),i==="AM"&&n===12&&(n=0)),s=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(s)&&(s=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),a=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,o=o.clone().hour(n).minute(s).second(a)),this.endDate=null,this.setStartDate(o.clone()),who_is=0,r=t(e.target).attr("data-custom-mes"),u=t(e.target).attr("data-custom-mes"),jQuery(".wpestate_section_start").html(u),jQuery(".wpestate_section_end").html(daterangepicker_vars.end_date),this.element.val(r),this.start_date_picked=1):!this.endDate&&o.isBefore(this.startDate)?(this.setEndDate(this.startDate.clone()),who_is=1):(this.timePicker&&(n=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(i=this.container.find(".right .ampmselect").val(),i==="PM"&&n<12&&(n+=12),i==="AM"&&n===12&&(n=0)),s=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(s)&&(s=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),a=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,o=o.clone().hour(n).minute(s).second(a)),this.setEndDate(o.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply()),this.start_date_picked=0,f=t(e.target).attr("data-custom"),h=t(e.target).attr("data-custom-mes"),jQuery(".wpestate_section_end").html(h)),this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),e.stopPropagation()},calculateChosenLabel:function(){var e,t,n=!0,s=0;for(t in this.ranges){if(this.timePicker){if(e=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",this.startDate.format(e)==this.ranges[t][0].format(e)&&this.endDate.format(e)==this.ranges[t][1].format(e)){n=!1,this.chosenLabel=this.container.find(".ranges li:eq("+s+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[t][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[t][1].format("YYYY-MM-DD")){n=!1,this.chosenLabel=this.container.find(".ranges li:eq("+s+")").addClass("active").attr("data-range-key");break}s++}n&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):this.chosenLabel=null,this.showCalendars())},clickApply:function(){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var o=t(e.target).closest(".drp-calendar").hasClass("left"),a=o?"left":"right",i=this.container.find(".drp-calendar."+a),s=parseInt(i.find(".monthselect").val(),10),n=i.find(".yearselect").val();o||(n<this.startDate.year()||n==this.startDate.year()&&s<this.startDate.month())&&(s=this.startDate.month(),n=this.startDate.year()),this.minDate&&(n<this.minDate.year()||n==this.minDate.year()&&s<this.minDate.month())&&(s=this.minDate.month(),n=this.minDate.year()),this.maxDate&&(n>this.maxDate.year()||n==this.maxDate.year()&&s>this.maxDate.month())&&(s=this.maxDate.month(),n=this.maxDate.year()),o?(this.leftCalendar.month.month(s).year(n),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(s).year(n),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var n,i,r,c,s=t(e.target).closest(".drp-calendar"),l=s.hasClass("left"),o=parseInt(s.find(".hourselect").val(),10),a=parseInt(s.find(".minuteselect").val(),10);isNaN(a)&&(a=parseInt(s.find(".minuteselect option:last").val(),10)),r=this.timePickerSeconds?parseInt(s.find(".secondselect").val(),10):0,this.timePicker24Hour||(c=s.find(".ampmselect").val(),c==="PM"&&o<12&&(o+=12),c==="AM"&&o===12&&(o=0)),l?(n=this.startDate.clone(),n.hour(o),n.minute(a),n.second(r),this.setStartDate(n),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==n.format("YYYY-MM-DD")&&this.endDate.isBefore(n)&&this.setEndDate(n.clone())):this.endDate&&(i=this.endDate.clone(),i.hour(o),i.minute(a),i.second(r),this.setEndDate(i)),this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;var s=this.element.val().split(this.locale.separator),t=null,n=null;if(s.length===2&&(t=e(s[0],this.locale.format),n=e(s[1],this.locale.format)),(this.singleDatePicker||t===null||n===null)&&(t=e(this.element.val(),this.locale.format),n=t),!t.isValid()||!n.isValid())return;this.setStartDate(t),this.setEndDate(n),this.updateView()},keydown:function(e){(e.keyCode===9||e.keyCode===13)&&this.hide(),e.keyCode===27&&(e.preventDefault(),e.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var e=this.startDate.format(this.locale.format);this.singleDatePicker||(e+=this.locale.separator+this.endDate.format(this.locale.format)),e!==this.element.val()&&this.element.val(e).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},t.fn.daterangepicker=function(e,s){var o=t.extend(!0,{},t.fn.daterangepicker.defaultOptions,e);return this.each(function(){var e=t(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new n(e,o,s))}),this},n})